# 测试结果显示规格

## ADDED Requirements

### Requirement: 关键数据仅显示原则
系统在展示测试成绩时，SHALL 移除等级评分，仅显示各测试类型的关键指标。

#### Scenario: 简单反应时间测试
- **WHEN** 用户查看简单反应时间测试的成绩
- **THEN** 仅显示反应时间（毫秒）、完成日期，不显示等级

#### Scenario: 选择反应时间测试
- **WHEN** 用户查看选择反应时间测试的成绩
- **THEN** 仅显示反应时间（毫秒）和错误次数，不显示等级

#### Scenario: 序列记忆测试
- **WHEN** 用户查看序列记忆测试的成绩
- **THEN** 仅显示最后级别和完成时间，不显示等级

### Requirement: 百分位排名展示
系统 SHALL 在历史记录和结算页面显示用户超过 X% 的人，这是用户相对排名的指标。

#### Scenario: 百分位低于或等于99
- **WHEN** 用户的成绩百分位为 85%
- **THEN** 显示"超过 85% 的用户"

#### Scenario: 百分位高于99
- **WHEN** 用户的成绩百分位为 99.87%
- **THEN** 显示"超过 99.87% 的用户"（保留小数点后两位）

#### Scenario: 百分位为100
- **WHEN** 用户的成绩百分位为 100%
- **THEN** 显示"超过 100% 的用户" 或 "最优成绩"

### Requirement: 历史记录页面仅显示最优成绩
系统在历史记录页面 SHALL 为每种测试类型仅显示该类型的最优成绩记录。

#### Scenario: 多条同类型成绩
- **WHEN** 用户完成过同一测试类型 5 次
- **THEN** 历史记录仅显示该测试类型的最高分（或最优）记录

#### Scenario: 显示完成日期
- **WHEN** 用户查看历史成绩
- **THEN** 每条成绩记录显示最优成绩的完成日期

### Requirement: 历史记录点击交互
系统 SHALL 支持用户点击成绩项查看详细信息。

#### Scenario: 点击打开详情
- **WHEN** 用户点击历史记录中的成绩项
- **THEN** 弹出或展开详细信息面板，显示完整成绩数据和百分位信息

#### Scenario: 关闭详情面板
- **WHEN** 用户在详情面板中点击关闭
- **THEN** 面板关闭，返回历史记录列表视图

### Requirement: 成绩删除功能
系统 SHALL 在详细信息面板中提供删除成绩记录的选项。

#### Scenario: 删除单条成绩
- **WHEN** 用户在成绩详情面板点击"清除记录"
- **THEN** 显示确认对话框

#### Scenario: 确认删除
- **WHEN** 用户点击确认删除
- **THEN** 该成绩记录被删除，详情面板关闭，历史列表刷新

#### Scenario: 取消删除
- **WHEN** 用户点击取消
- **THEN** 对话框关闭，成绩记录保留

### Requirement: 个人最优成绩恭喜提示
系统在测试完成结算页面 SHALL 识别本次成绩是否为用户个人最优，若是则显示恭喜提示。

#### Scenario: 非最优成绩
- **WHEN** 用户完成测试，本次成绩非个人最优
- **THEN** 不显示恭喜提示，仅显示本次成绩和百分位

#### Scenario: 首次测试成绩
- **WHEN** 用户首次完成某测试类型
- **THEN** 显示恭喜提示"恭喜！这是你第一次测试成绩"

#### Scenario: 突破个人最高纪录
- **WHEN** 用户完成测试，本次成绩超过之前的个人最优
- **THEN** 显示恭喜提示"恭喜！你刷新了个人最高纪录"

### Requirement: 结算页面显示规范
系统在测试完成结算页面 SHALL 使用与历史记录页面相同的显示规范。

#### Scenario: 结算页面关键数据显示
- **WHEN** 用户完成测试进入结算页面
- **THEN** 显示本次成绩的关键指标、百分位排名（超过X%的用户）、完成日期和恭喜提示（如适用）

#### Scenario: 显示成绩完成时间
- **WHEN** 用户在结算页面查看成绩
- **THEN** 显示成绩完成的日期和时间

## MODIFIED Requirements

### Requirement: 等级系统移除
原有基于等级的成绩评分体系 SHALL 被移除，改用百分位排名作为相对成绩评估的唯一方式。

#### Scenario: 等级字段弃用
- **WHEN** 系统加载旧成绩数据
- **THEN** 不显示等级信息，仅显示关键指标和百分位

#### Scenario: 新成绩不含等级
- **WHEN** 用户完成新测试
- **THEN** 成绩数据不包含等级字段
